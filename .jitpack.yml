jdk:
  - openjdk17

android:
  components:
    - build-tools;35.0.0
    - platform-tools
    - platforms;android-35

before_install:
  - VERSION=$(git tag --sort=committerdate | tail -1  || echo "unspecified")
  - echo "VERSION=${VERSION}"
  - RELEASE_URL="https://github.com/reown-com/yttrium/releases/download/${VERSION}/kotlin-artifacts.zip"
  - echo "Fetching binaries and bindings from $RELEASE_URL"
  - curl -L -o kotlin-artifacts.zip $RELEASE_URL
  - unzip kotlin-artifacts.zip -d binaries/
  - mkdir -p crates/kotlin-ffi/android/src/main/jniLibs/arm64-v8a
  - mkdir -p crates/kotlin-ffi/android/src/main/jniLibs/armeabi-v7a
  - mkdir -p crates/kotlin-ffi/android/src/main/jniLibs/x86_64
  - mkdir -p crates/kotlin-ffi/android/src/main/kotlin/com/reown/yttrium
  - mv binaries/yttrium/libs/arm64-v8a/libuniffi_yttrium.so crates/kotlin-ffi/android/src/main/jniLibs/arm64-v8a/
  - mv binaries/yttrium/libs/armeabi-v7a/libuniffi_yttrium.so crates/kotlin-ffi/android/src/main/jniLibs/armeabi-v7a/
  - mv binaries/yttrium/libs/x86_64/libuniffi_yttrium.so crates/kotlin-ffi/android/src/main/jniLibs/x86_64/
  - mv binaries/yttrium/kotlin-bindings/uniffi/uniffi_yttrium/uniffi_yttrium.kt crates/kotlin-ffi/android/src/main/kotlin/com/reown/yttrium/
  - mv binaries/yttrium/kotlin-bindings/uniffi/yttrium/yttrium.kt crates/kotlin-ffi/android/src/main/kotlin/com/reown/yttrium/

# install:
#   - ./gradlew :crates:kotlin-ffi:android:assembleRelease

# build:
#   - ./gradlew :crates:kotlin-ffi:android:publishReleasePublicationToMavenLocal